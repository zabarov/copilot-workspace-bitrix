# Практические сценарии работы с Bitrix Copilot Workspace

Эти схемы помогут выбрать агентов и шаги под типовые случаи. В каждом сценарии сначала инициализируйте конфиги (40-tools-init), если видите плейсхолдеры в `composer.json`/`phpstan.neon`/`deptrac.yaml`.

## 1. Собственные решения на фреймворке (релизы и обновления)
- Формализуйте требования: 10-requirements-create → 10-domain-describe → 20-architecture-plan → 20-batches-plan.
- Создайте/обновите модуль: 30-bitrix-module-create (если каркаса нет) → 30-code-build по батчам.
- Проверки: 40-tests-run, при необходимости 40-code-review.
- Документация: 50-docs-update.
- Поставка: 60-release-build (релизный пакет) → 60-bitrix-update-build (пакет обновления с правильной структурой `install/` и версией).

## 2. Доработка проектов (свой фреймворк или чистый Bitrix)
- Подключите модуль и конфиги под проект: 40-tools-init.
- Зафиксируйте требования/батчи (10/20-агенты) или работайте по существующим.
- Реализация: 30-code-build, проверки 40-tests-run, ревью 40-code-review.
- Документация: 50-docs-update.
- При необходимости — релиз/апдейт через 60-release-build и 60-bitrix-update-build.

## 3. Разработка/доработка модулей и выпуск обновлений
- Инициализация: 40-tools-init, при отсутствии — 30-bitrix-module-create для каркаса.
- Требования/батчи: 10/20-агенты.
- Код: 30-code-build, проверки 40-tests-run, ревью 40-code-review.
- Упаковка: 60-release-build для релиза, 60-bitrix-update-build для апдейта (проверьте `install/version.php`, структуру `install/local/modules/<module_id>/...`, `updater.php`).

## 4. Доработка фреймворка (как модуля)
- Определите module_id фреймворка, инициализируйте конфиги (40-tools-init).
- Зафиксируйте требования/изменения фреймворка в inputs/ (10/20).
- Реализация: 30-code-build, целевые проверки (учитывайте влияние на все решения), 40-code-review.
- Документация: 50-docs-update с акцентом на совместимость и миграции.
- Поставка: если фреймворк распространяется как модуль — 60-release-build/60-bitrix-update-build.

## Памятка
- Всегда сверяйтесь с правилами в `rules/` (разработка, производительность, окружение/релизы).
- При шаблонных конфигурациях запустите 40-tools-init перед любыми проверками.
- Логи проверок и батчей складывайте в `results/checks/**` и `results/batches/**`.
